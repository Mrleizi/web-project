{% extends 'backstage/base_main.html' %}

{% block title %}
    异清轩博客管理系统
{% endblock %}

{% block aside %}
    <aside class="col-sm-3 col-md-2 col-lg-2 sidebar">
        <ul class="nav nav-sidebar">
            <li class="active"><a href="{% url 'user:back_index' %}">报告</a></li>
        </ul>
        <ul class="nav nav-sidebar">
            <li><a href="{% url 'user:article' %}">文章</a></li>
            <li><a href="{% url 'user:notice' %}">公告</a></li>
            <li><a href="{% url 'user:comment' %}">评论</a></li>
            <li><a data-toggle="tooltip" data-placement="top" title="网站暂无留言功能">留言</a></li>
        </ul>
        <ul class="nav nav-sidebar">
            <li><a href="{% url 'user:category' %}">栏目</a></li>
            <li><a class="dropdown-toggle" id="otherMenu" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">其他</a>
                <ul class="dropdown-menu" aria-labelledby="otherMenu">
                    <li><a href="{% url 'user:flink' %}">友情链接</a></li>
                    <li><a href="{% url 'user:loginlog' %}">访问记录</a></li>
                </ul>
            </li>
        </ul>
        <ul class="nav nav-sidebar">
            <li><a class="dropdown-toggle" id="userMenu" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">用户</a>
                <ul class="dropdown-menu" aria-labelledby="userMenu">
                    <li><a href="#">管理用户组</a></li>
                    <li><a href="{% url 'user:manage_user' %}">管理用户</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="{% url 'user:loginlog' %}">管理登录日志</a></li>
                </ul>
            </li>
            <li><a class="dropdown-toggle" id="settingMenu" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="false">设置</a>
                <ul class="dropdown-menu" aria-labelledby="settingMenu">
                    <li><a href="{% url 'user:setting' %}">基本设置</a></li>
                    <li><a href="{% url 'user:readset' %}">用户设置</a></li>
                    <li role="separator" class="divider"></li>
                    <li><a href="#">安全配置</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="disabled"><a>扩展菜单</a></li>
                </ul>
            </li>
        </ul>
    </aside>
{% endblock %}

{% block differ %}
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-lg-10 col-md-offset-2 main" id="main">
        <h1 class="page-header">信息总览</h1>
        <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
                <h4>文章</h4>
                <span class="text-muted">0 条</span></div>
            <div class="col-xs-6 col-sm-3 placeholder">
                <h4>评论</h4>
                <span class="text-muted">0 条</span></div>
            <div class="col-xs-6 col-sm-3 placeholder">
                <h4>友链</h4>
                <span class="text-muted">0 条</span></div>
            <div class="col-xs-6 col-sm-3 placeholder">
                <h4>访问量</h4>
                <span class="text-muted">0</span></div>
        </div>
        <h1 class="page-header">状态</h1>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tbody>
                <tr>
                    <td>登录者: <span>{{ user.username }}</span>，这是您第 <span>{{ login_count }}</span> 次登录</td>
                </tr>
                <tr>
                    <td>上次登录时间: <span>{{ last_time | date:'Y-m-d H:i:s' }} </span>, 上次登录IP:<span>{{ last_ip }}</span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <h1 class="page-header">系统信息</h1>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                <tr></tr>
                </thead>
                <tbody>
                <tr>
                    <td>管理员个数:</td>
                    <td>{{ admin_count }} 人</td>
                    <td>服务器软件:</td>
                    <td>Apache/2.4.10 (Win32) OpenSSL/1.0.1i mod_fcgid/2.3.9</td>
                </tr>
                <tr>
                    <td>浏览器:</td>
                    <td id="browser"></td>
                    <td>PHP版本:</td>
                    <td>5.6.1</td>
                </tr>
                <tr>
                    <td>操作系统:</td>
                    <td>{{ operate_system }}</td>
                    <td>PHP运行方式:</td>
                    <td>CGI-FCGI</td>
                </tr>
                <tr>
                    <td>登录者IP:</td>
                    <td>{{ login_ip }}</td>
                    <td>MYSQL版本:</td>
                    <td>5.5.40</td>
                </tr>
                <tr>
                    <td>程序版本:</td>
                    <td class="version">YlsatCMS 1.0 <font size="-6" color="#BBB">(20160108160215)</font></td>
                    <td>上传文件:</td>
                    <td>可以 <font size="-6" color="#BBB">(最大文件：2M ，表单：8M )</font></td>
                </tr>
                <tr>
                    <td>程序编码:</td>
                    <td>UTF-8</td>
                    <td>当前时间:</td>
                    <td id="current"></td>
                </tr>
                </tbody>
                <tfoot>
                <tr></tr>
                </tfoot>
            </table>
        </div>
        <footer>
            <h1 class="page-header">程序信息</h1>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <tbody>
                    <tr>
                        <td><span style="display:inline-block; width:8em">版权所有</span> POWERED BY WY ALL RIGHTS RESERVED
                        </td>
                    </tr>
                    <tr>
                        <td><span style="display:inline-block;width:8em">页面加载时间</span> <span id="load_time"></span>
                            更多模板：<a href="http://www.mycodes.net/" target="_blank">源码之家</a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </footer>
    </div>

{% endblock %}

{% block extJs3 %}
    <script type="text/javascript">
        function getBrowserInfo() {
            var Sys = {};
            var ua = navigator.userAgent.toLowerCase();
            var re = /(msie|firefox|chrome|opera|version).*?([\d.]+)/;
            var m = ua.match(re);
            Sys.browser = m[1].replace(/version/, "'safari");
            Sys.ver = m[2];
            return Sys;
        }

        //获取当前的浏览器信息
        var sys = getBrowserInfo();
        //sys.browser得到浏览器的类型，sys.ver得到浏览器的版本
        //	document.write(sys.browser + '的版本是:' + sys.ver);
        {#document.write(sys.browser + sys.ver);#}
        var browser = document.getElementById('browser');
        browser.innerHTML = sys.browser + sys.ver;

        var current_time = document.getElementById('current');
        setInterval(
            function () {
                var d = new Date();
                var the_year = d.getFullYear();
                var the_month = d.getMonth() + 1;
                var the_data = d.getDate();
                var the_hour = d.getHours();
                var the_minite = d.getMinutes();
                var the_second = d.getSeconds();


                if (the_month < 10) {
                    the_month = '0' + the_month
                }

                if (the_data < 10) {
                    the_data = '0' + the_data
                }


                if (the_minite < 10) {
                    the_minite = '0' + the_minite
                }

                if (the_second < 10) {
                    the_second = '0' + the_second
                }

                current_time.innerHTML = the_year + '-' + the_month + '-' + the_data + ' ' + the_hour + ':' + the_minite + ':' + the_second

            }, 1000);

        var time2 = new Date().getTime();
        var load_time = document.getElementById('load_time');
        load_time.innerHTML = 'PROCESSED IN '+ (time2-{{time1}}*1000)/1000 +' '+'SECONDS'

    </script>
{% endblock %}

